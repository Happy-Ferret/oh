#!/usr/bin/env oh

define a = "lexical"
public caller = "top-level"

define foo: method () = {
    echo a (upvar caller)
}

foo

define bar: method () = {
    define a = "local"
    public caller = "bar"

    foo
}

bar

define baz: method () = {
    public a = "nice try"
    public caller = "baz"

    foo
}

baz

#-     lexical top-level
#-     lexical bar
#-     lexical baz

